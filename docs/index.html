<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Honda Car Search Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-car"></i> Honda Car Search Dashboard</h1>
            <p class="subtitle">AutoPark Honda Inventory Monitor</p>
        </header>

        <!-- Search Criteria Section -->
        <section class="search-criteria">
            <h2><i class="fas fa-search"></i> Current Search Criteria</h2>
            <div class="criteria-grid">
                <div class="criteria-item">
                    <div class="criteria-label">Make & Model</div>
                    <div class="criteria-value">Honda Civic & Civic Hybrid</div>
                </div>
                <div class="criteria-item">
                    <div class="criteria-label">Year Range</div>
                    <div class="criteria-value">2015 - 2025 (10+ years)</div>
                </div>
                <div class="criteria-item">
                    <div class="criteria-label">Inventory Type</div>
                    <div class="criteria-value">New & Used Vehicles</div>
                </div>
                <div class="criteria-item search-now-container">
                    <button id="search-now-btn" class="search-now-btn" onclick="runNewSearch()">
                        <i class="fas fa-search"></i> Search Now
                    </button>
                    <div class="search-status" id="search-status"></div>
                </div>
            </div>
        </section>

        <!-- GitHub Token Setup (Collapsible) -->
        <section class="setup-section" id="setup-section">
            <button class="setup-toggle" onclick="toggleSetup()">
                <i class="fas fa-cog"></i> Setup GitHub Authentication (Optional)
                <span id="setup-arrow" class="setup-arrow">â–¼</span>
            </button>
            <div class="setup-content" id="setup-content" style="display: none;">
                <p class="setup-info">
                    <strong>Enable Real-time Search:</strong> To use the "Search Now" button for live scraping, 
                    enter a GitHub Personal Access Token with "Actions" and "Contents" permissions.
                </p>
                <div class="token-input-group">
                    <input type="password" id="github-token" placeholder="GitHub Personal Access Token (optional)" 
                           class="token-input">
                    <button onclick="saveToken()" class="save-token-btn">Save</button>
                    <button onclick="clearToken()" class="clear-token-btn">Clear</button>
                </div>
                <div class="setup-status" id="setup-status"></div>
                <details class="setup-help">
                    <summary>How to create a GitHub token</summary>
                    <ol>
                        <li>Go to GitHub â†’ Settings â†’ Developer settings â†’ Personal access tokens â†’ Tokens (classic)</li>
                        <li>Click "Generate new token (classic)"</li>
                        <li>Select scopes: <code>repo</code> and <code>workflow</code></li>
                        <li>Copy the token and paste it above</li>
                    </ol>
                    <p><strong>Note:</strong> The token is stored locally in your browser and never shared.</p>
                </details>
            </div>
        </section>

        <!-- Search Statistics -->
        <section class="search-stats">
            <h2><i class="fas fa-chart-bar"></i> Search Statistics</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" id="total-searches">0</div>
                    <div class="stat-label">Total Searches</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="vehicles-found">0</div>
                    <div class="stat-label">Vehicles Found</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="notifications-sent">0</div>
                    <div class="stat-label">Dealerships</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="last-search">Loading...</div>
                    <div class="stat-label">Last Search</div>
                </div>
            </div>
        </section>

        <!-- Search Results Section -->
        <section class="search-results">
            <h2><i class="fas fa-list"></i> Recent Vehicle Matches</h2>
            <div class="results-header">
                <span class="last-updated">Last Updated: <span id="last-updated-time">Loading...</span></span>
                <button class="refresh-btn" onclick="refreshResults()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
            
            <div id="results-container">
                <!-- Results will be loaded here -->
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i> Loading search results...
                </div>
            </div>
        </section>

        <!-- Status Section -->
        <section class="status-section">
            <h2><i class="fas fa-info-circle"></i> System Status</h2>
            <div class="status-grid">
                <div class="status-item status-success">
                    <i class="fas fa-check-circle"></i>
                    <span>App Functional</span>
                </div>
                <div class="status-item status-success">
                    <i class="fas fa-check-circle"></i>
                    <span>Web Scraping Active</span>
                </div>
                <div class="status-item status-success">
                    <i class="fas fa-check-circle"></i>
                    <span>Scheduling Operational</span>
                </div>
                <div class="status-item status-success">
                    <i class="fas fa-check-circle"></i>
                    <span>Web Dashboard Active</span>
                </div>
            </div>
        </section>

        <footer>
            <p>ðŸš— Honda Car Search App â€¢ Automated Inventory Monitoring</p>
            <p><a href="https://www.autoparkhonda.com" target="_blank">Visit AutoPark Honda <i class="fas fa-external-link-alt"></i></a></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>